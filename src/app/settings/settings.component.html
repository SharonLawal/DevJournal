<div class="settings-page-wrapper">
  <div class="settings-container">
    <div class="settings-section">
      <h3 class="section-title">Update Profile</h3>
      <div class="settings-card">
        <div class="form-group">
          <label for="userName">Name</label>
          <input
            type="text"
            id="userName"
            class="form-control"
            [(ngModel)]="userName"
          />
        </div>
        <div class="form-group">
          <label for="userEmail">Email</label>
          <input
            type="email"
            id="userEmail"
            class="form-control"
            [(ngModel)]="userEmail"
          />
        </div>
        <div class="form-group">
          <label for="currentPassword">Current Password</label>
          <input
            type="password"
            id="currentPassword"
            class="form-control"
            [(ngModel)]="currentPassword"
            placeholder="Required for email/password changes"
          />
        </div>
        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input
            type="password"
            id="newPassword"
            class="form-control"
            [(ngModel)]="newPassword"
            placeholder="Leave blank to keep current"
          />
        </div>
        <button
          class="btn btn-primary"
          (click)="updateProfile()"
          [disabled]="isUpdatingProfile"
        >
          <span *ngIf="isUpdatingProfile" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          {{ isUpdatingProfile ? 'Updating...' : 'Update Profile' }}
        </button>
        <p *ngIf="profileMessage" [class]="profileMessageClass">
          {{ profileMessage }}
        </p>
      </div>
    </div>

    <div class="settings-section">
      <h3 class="section-title">AI Assistant Settings</h3>
      <div class="settings-card">
        <div class="toggle-wrapper">
          <label class="toggle-switch">
            <input
              type="checkbox"
              [(ngModel)]="aiAssistantEnabled"
              (change)="toggleAiSettings()"
            />
            <span class="slider round"></span>
          </label>
          <span class="toggle-label">Enable AI Assistant</span>
        </div>
        <p *ngIf="aiSettingsMessage" [class]="aiSettingsMessageClass">
          {{ aiSettingsMessage }}
        </p>
      </div>
    </div>

    <div class="settings-section">
      <h3 class="section-title">Data Export</h3>
      <div class="settings-card">
        <p class="export-description">
          Download all your journal entries as a JSON file.
        </p>
        <button class="btn btn-primary" (click)="exportJournals()">
          Export Journals (JSON)
        </button>
        <p *ngIf="exportMessage" [class]="exportMessageClass">
          {{ exportMessage }}
        </p>
      </div>
    </div>
  </div>
</div>