<div class="auth-page register-page">
  <div class="left-panel">
    <div class="form-card">
      <h2 class="form-title animate__animated animate__fadeInDown">Create Account</h2>

      <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="custom-input-field animate__animated animate__fadeInLeft">
          <i class="fas fa-user"></i>
          <input
            type="text"
            formControlName="name"
            placeholder="Your Name"
            required
          />
        </div>
        <div *ngIf="f['name'].invalid && f['name'].touched" class="error-message">
          <span *ngIf="f['name'].errors?.['required']">Name is required.</span>
        </div>

        <div class="custom-input-field animate__animated animate__fadeInLeft animate__delay-0-1s">
          <i class="fas fa-envelope"></i>
          <input
            type="email"
            formControlName="email"
            placeholder="email@gmail.com"
            required
          />
        </div>
        <div *ngIf="f['email'].invalid && f['email'].touched" class="error-message">
          <span *ngIf="f['email'].errors?.['required']">Email is required.</span>
          <span *ngIf="f['email'].errors?.['email']">Enter a valid email address.</span>
        </div>

        <div class="custom-input-field animate__animated animate__fadeInLeft animate__delay-0-3s">
          <i class="fas fa-lock"></i>
          <input
            [type]="passwordFieldType"
            formControlName="password"
            placeholder="Enter your password"
            required
          />
          <i class="fas" [ngClass]="{'fa-eye-slash': passwordFieldType === 'password', 'fa-eye': passwordFieldType === 'text'}" (click)="togglePasswordVisibility('password')"></i>
        </div>
        <div *ngIf="f['password'].invalid && f['password'].touched" class="error-message">
          <span *ngIf="f['password'].errors?.['required']">Password is required.</span>
          <span *ngIf="f['password'].errors?.['minlength']">Password must be at least 6 characters.</span>
        </div>

        <div class="custom-input-field animate__animated animate__fadeInLeft animate__delay-0-4s">
          <i class="fas fa-lock"></i>
          <input
            [type]="confirmPasswordFieldType"
            formControlName="confirmPassword"
            placeholder="Confirm password"
            required
          />
          <i class="fas" [ngClass]="{'fa-eye-slash': confirmPasswordFieldType === 'password', 'fa-eye': confirmPasswordFieldType === 'text'}" (click)="togglePasswordVisibility('confirmPassword')"></i>
        </div>
        <div *ngIf="f['confirmPassword'].invalid && f['confirmPassword'].touched" class="error-message">
          <span *ngIf="f['confirmPassword'].errors?.['required']">Confirm password is required.</span>
        </div>
        <div *ngIf="form.hasError('mismatch') && f['confirmPassword'].touched" class="error-message">
          Passwords do not match.
        </div>

        <button type="submit" class="btn-custom-primary w-100 animate__animated animate__zoomIn animate__delay-0-5s" [disabled]="form.invalid || isLoading">
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          Create Account
        </button>
      </form>

      <p class="account-prompt animate__animated animate__fadeInUp animate__delay-1-1s">
        Already have an account?
        <a routerLink="/login" class="text-link">Sign in</a>
      </p>

      <div *ngIf="errorMessage" class="alert alert-danger text-center mt-3 animate__animated animate__fadeIn animate__delay-1-3s" role="alert">
        {{ errorMessage }}
      </div>
      <div *ngIf="successMessage" class="alert alert-success text-center mt-3 animate__animated animate__fadeIn animate__delay-1-3s" role="alert">
        {{ successMessage }}
      </div>
    </div>
  </div>

  <div class="right-panel">
    <img src="assets/images/register.png" alt="3D character writing on a book" class="character-image animate__animated animate__fadeInRight animate__delay-0-5s">
  </div>
</div>